<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Login</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body class="min-h-screen bg-slate-900 text-white flex items-center justify-center p-4">

  <div class="w-full max-w-md rounded-2xl border border-slate-700/70 bg-slate-900/70 backdrop-blur p-6 md:p-8 shadow-2xl space-y-6">
    <div class="flex items-start justify-between">
      <div>
        <h1 id="form-title" class="text-2xl font-bold tracking-tight">Login</h1>
      </div>
    </div>

  <form id="login-form" class="space-y-4" autocomplete="on">
      <div class="space-y-1">
        <label class="text-sm font-medium text-slate-300" for="login-email">Email</label>
        <input id="login-email" type="email" required class="w-full bg-slate-800/70 border border-slate-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/40 transition px-4 py-2.5 rounded-lg placeholder:text-slate-500" placeholder="you@example.com" />
      </div>
      <div class="space-y-1">
        <div class="flex items-center justify-between">
          <label class="text-sm font-medium text-slate-300" for="login-password">Password</label>
          <button type="button" id="forgot-pass" class="text-[11px] text-slate-400 hover:text-emerald-400">Forgot?</button>
        </div>
        <input id="login-password" type="password" required minlength="6" class="w-full bg-slate-800/70 border border-slate-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/40 transition px-4 py-2.5 rounded-lg placeholder:text-slate-500" placeholder="••••••" />
      </div>
      <button id="login-submit" type="submit" class="w-full bg-cyan-500 hover:bg-cyan-400 text-slate-900 font-semibold py-3 rounded-full text-sm tracking-wide flex items-center justify-center gap-2 transition">
        <span id="login-btn-text">Login</span>
        <span id="login-spinner" class="hidden animate-spin">⏳</span>
      </button>
    </form>

    <form id="register-form" class="space-y-4 hidden" autocomplete="on">
      <div class="space-y-1">
        <label class="text-sm font-medium text-slate-300" for="reg-name">Name</label>
        <input id="reg-name" type="text" required minlength="2" class="w-full bg-slate-800/70 border border-slate-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/40 transition px-4 py-2.5 rounded-lg placeholder:text-slate-500" placeholder="Your Name" />
      </div>
      <div class="space-y-1">
        <label class="text-sm font-medium text-slate-300" for="reg-email">Email</label>
        <input id="reg-email" type="email" required class="w-full bg-slate-800/70 border border-slate-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/40 transition px-4 py-2.5 rounded-lg placeholder:text-slate-500" placeholder="you@example.com" />
      </div>
      <div class="space-y-1">
        <label class="text-sm font-medium text-slate-300" for="reg-password">Password</label>
        <input id="reg-password" type="password" required minlength="6" class="w-full bg-slate-800/70 border border-slate-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/40 transition px-4 py-2.5 rounded-lg placeholder:text-slate-500" placeholder="Create a password" />
      </div>
      <button id="register-submit" type="submit" class="w-full bg-cyan-500 hover:bg-cyan-400 text-slate-900 font-semibold py-3 rounded-full text-sm tracking-wide flex items-center justify-center gap-2 transition">
        <span>Create Account</span>
        <span id="register-spinner" class="hidden animate-spin">⏳</span>
      </button>
    </form>

    <div class="flex items-center gap-4"><div class="flex-1 h-px bg-slate-700"></div><span class="text-[11px] uppercase tracking-wide text-slate-500">or continue with</span><div class="flex-1 h-px bg-slate-700"></div></div>

    <div class="grid gap-3">
      <button id="google-oauth" class="h-11 rounded-xl bg-white hover:bg-slate-100 text-slate-800 border border-slate-300 flex items-center justify-center gap-3 text-sm font-semibold transition">
        <span class="w-5 h-5" aria-hidden="true">
          <svg viewBox="0 0 48 48" class="w-5 h-5"><path fill="#EA4335" d="M24 9.5c3.54 0 6 1.54 7.38 2.84l5.04-4.93C33.64 4.35 29.29 2.5 24 2.5 14.82 2.5 7.09 8.42 4.24 16.76l6.75 5.24C12.53 15.34 17.74 9.5 24 9.5z"/><path fill="#4285F4" d="M46.5 24.5c0-1.57-.14-3.08-.4-4.5H24v9h12.65c-.55 2.8-2.2 5.17-4.69 6.77l7.18 5.58C43.82 37.42 46.5 31.5 46.5 24.5z"/><path fill="#FBBC05" d="M10.99 28.24A14.5 14.5 0 0 1 9.5 24c0-1.48.25-2.92.7-4.24L3.45 14.5A21.45 21.45 0 0 0 2 24c0 3.44.82 6.69 2.26 9.5l6.73-5.26z"/><path fill="#34A853" d="M24 46.5c5.88 0 10.83-1.94 14.44-5.26l-7.18-5.58c-2 1.35-4.57 2.14-7.26 2.14-6.26 0-11.47-4.84-12.99-11.26l-6.75 5.24C7.09 39.58 14.82 46.5 24 46.5z"/><path fill="none" d="M2 2h44v44H2z"/></svg>
        </span>
        <span>Continue with Google</span>
      </button>
    </div>
    <div class="text-xs text-slate-400 text-center mt-2">Sign in with Google. Admins will be redirected to the admin dashboard, others to the user app.</div>

    <div id="phone-otp-panel" class="hidden space-y-4 border border-slate-700/60 rounded-xl p-4 bg-slate-800/40">
      <div id="phone-step-send" class="space-y-3">
        <label class="text-xs font-medium text-slate-400" for="phone-number">Phone (E.164)</label>
        <input id="phone-number" type="tel" class="w-full bg-slate-800/70 border border-slate-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/40 transition px-3 py-2 rounded-lg text-sm" placeholder="+15551234567" />
        <button id="phone-send-code" type="button" class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-semibold py-2 rounded-lg flex items-center justify-center gap-2 text-sm">Send Code <span id="phone-send-spinner" class="hidden animate-spin">⏳</span></button>
        <p class="text-[10px] text-slate-500">SMS auth must be enabled.</p>
      </div>
      <div id="phone-step-verify" class="space-y-3 hidden">
        <label class="text-xs font-medium text-slate-400" for="phone-otp-code">Enter Code</label>
        <input id="phone-otp-code" type="text" class="w-full bg-slate-800/70 border border-slate-700 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/40 transition px-3 py-2 rounded-lg tracking-widest text-center text-sm" placeholder="123456" />
        <button id="phone-verify-code" type="button" class="w-full bg-emerald-600 hover:bg-emerald-500 text-white font-semibold py-2 rounded-lg flex items-center justify-center gap-2 text-sm">Verify & Login <span id="phone-verify-spinner" class="hidden animate-spin">⏳</span></button>
        <button id="phone-resend" type="button" class="w-full bg-slate-700 hover:bg-slate-600 text-white font-semibold py-2 rounded-lg text-sm">Resend</button>
      </div>
      <div class="pt-2 text-center">
        <button type="button" id="phone-back-email" class="text-[11px] text-emerald-400 hover:underline">Use email/password instead</button>
      </div>
    </div>

    <div id="auth-message" class="text-center text-sm min-h-[1.25rem]"></div>

    <div id="toggle-line" class="text-center text-xs text-slate-400">
      <span>Don't have an account? <button id="to-register" class="text-emerald-400 hover:underline">Register</button></span>
    </div>

  <div class="text-center text-[11px] text-slate-500 mt-2">
      <a href="index.html" class="text-emerald-400 hover:underline">Back to App</a> · <a href="admin.html" class="text-emerald-400 hover:underline">Dashboard</a>
    </div>
  </div>
  

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.42.5/dist/umd/supabase.min.js"></script>
  <script src="supabaseClient.js"></script>
  <script src="auth.js"></script>
  <script>
    lucide.createIcons();
  </script>
</body>
</html>
